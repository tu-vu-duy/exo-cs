<% 
	import org.exoplatform.contact.ContactUtils;
%>
<div class="UITags" id="<%=uicomponent.getId()%>">
	<div class="TitleBar">
		<div class="TitleIcon BlueTag"><%=_ctx.appRes(uicomponent.getName() + ".label.tags")%></div>
		<div class="ActionIcon" onclick="eXo.webui.UIPopupSelectCategory.show(this, event);">
		
			<% /*Begin Popup Menu*/ %>
				<div style="position:relative;">
  			<div class="UIPopupCategory" style="display:none;">
  				<div class="UIRightClickPopupMenu" style="display:block;">
  					<div class="UIContextMenuContainer">
					  <div class="TopLeftRightClickPopupMenu">
	          			<div class="TopRightRightClickPopupMenu">
	            		  <div class="TopCenterRightClickPopupMenu"><span></span></div>
	          			</div>
	        		  </div>
				      <div class="MiddleLeftRightClickPopupMenu">
				        <div class="MiddleRightRightClickPopupMenu">
	              		  <div class="UIRightPopupMenuContainer">
		                    <div class="MenuItem">   
			                    <div class="ItemIcon AddTagIcon">
			                      <a href="<%=uicomponent.event("AddTag")%>"><%=_ctx.appRes(uicomponent.getName() + ".label.addTag")%></a>
			                    </div>
		                    </div>
						  				</div>
		          	</div>
		        	  </div>
					  <div class="BottomLeftRightClickPopupMenu">
				        <div class="BottomRightRightClickPopupMenu">
				          <div class="BottomCenterRightClickPopupMenu"><span></span></div>
				        </div>
				      </div>
	      			</div>
				</div>
  			</div>
  				</div>
  		<% /*End Popup Menu*/ %>
		
		</div>
	</div>
	<div class="ListContent">
		<%  
			List tags = uicomponent.getTags();
			String actionLink ;
			for(tag in tags) {
				actionLink  = uicomponent.event("SelectTag", tag.getId()) ;			
				cssClass = "Normal" ;
				if(tag.getId().equals(uicomponent.getSelectedTag())) cssClass = "Selected" ;
				color = tag.getColor() + "Tag" ;
		%>
			<div  class="TagList ItemList $cssClass" tagId="<%=tag.getId()%>" >
				<a href="$actionLink" class="IconHolder2 $color" title="<%=ContactUtils.encodeHTML(tag.getName())%>" ><%= ContactUtils.encodeHTML(tag.getName())%></a>
			</div>
		<% } %>
	</div>
	<% /*Begin Popup Menu*/ %>
				
	  	<div class="UIRightClickPopupMenu" id="UITagPopupMenu" eXoCallback="eXo.contact.UIContactPortlet.tagCallback">
	  		<div class="UIContextMenuContainer">
				  <div class="TopLeftRightClickPopupMenu">
		  			<div class="TopRightRightClickPopupMenu">
							<div class="TopCenterRightClickPopupMenu"><span></span></div>
		  			</div>
					</div>
		     	<div class="MiddleLeftRightClickPopupMenu">
	          <div class="MiddleRightRightClickPopupMenu">
	  					<div class="UIRightPopupMenuContainer">
	        			<div class="MenuItem">   
	            		<div class="ItemIcon EditActionIcon">
	              		<a href="<%=uicomponent.event("EditTag", "id")%>"><%=_ctx.appRes(uicomponent.getName() + ".label.edit")%></a>
	            		</div>
	        			</div>
	        			<div class="MenuItem">   
	            		<div class="ItemIcon DeleteIcon">
	              		<a href="<%=uicomponent.event("DeleteTag", "id")%>"><%=_ctx.appRes(uicomponent.getName() + ".label.delete")%></a>
	            		</div> 
	        			</div>
                <div class="MenuItem">   
                  <div class="ItemIcon ExportContactIcon">
                    <a href="<%=uicomponent.event("ExportAddress", "id")%>"><%=_ctx.appRes(uicomponent.getName() + ".label.exportContacts")%></a>
                  </div>
                </div>
        			
	        			<div class="MenuItem">   
                  <div class="ItemIcon PrintIcon">
                    <a href="<%=uicomponent.event("Print", "id")%>"><%=_ctx.appRes(uicomponent.getName() + ".label.printContacts")%></a>
                  </div>
                </div>	        			
							</div>
	  				</div>
					</div>
		      <div class="BottomLeftRightClickPopupMenu">
	        <div class="BottomRightRightClickPopupMenu">
	          <div class="BottomCenterRightClickPopupMenu"><span></span></div>
	        </div>
	      </div>
				</div>
			</div>
	  			
	  		<% /*End Popup Menu*/ %>
</div>
