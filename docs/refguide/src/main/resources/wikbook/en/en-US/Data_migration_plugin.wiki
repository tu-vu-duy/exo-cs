h1. Data Migration Plugin



h2. Calendar Version Update
* Node type change :
** *exo:reminder* replace property *exo:owner* by *exo:creator*
** configuration
{code:xml}
<external-component-plugins>
 <target-component>org.exoplatform.calendar.service.CalendarService</target-component>
 <component-plugin>
  <name>calendar.update.version</name>
  <set-method>addListenerPlugin</set-method>
  <type>org.exoplatform.calendar.service.impl.UpdateCalendarVersion</type>
  <description>Update calendar data</description>	
  <init-params>
   <object-param>
    <name>cs.calendar.update.object</name>
    <description>cs update obj param</description>
    <object type="org.exoplatform.calendar.service.CsObjectParam">
     <field name="nodeTypes">
      <collection type="java.util.ArrayList">
       <value>
        <object type="org.exoplatform.calendar.service.CsNodeTypeMapping">
         <field name="nodeTypeName">
          <string>exo:reminder</string>
         </field>
         <field name="updatedProperties">
          <collection type="java.util.ArrayList">
           <value>
            <object type="org.exoplatform.calendar.service.CsPropertyMapping">
             <field name="propertyName">
              <string>exo:owner</string>
             </field>
             <field name="replaceName">
              <string>exo:creator</string>
             </field>
             <field name="defaultValue">
              <string></string>
             </field>
            </object>
           </value>
          </collection>
         </field>
        </object>
       </value>
       <value>
        <object type="org.exoplatform.calendar.service.CsNodeTypeMapping">
         <field name="nodeTypeName">
          <string>exo:calendarEvent</string>
         </field>
         <field name="addedProperties">
          <collection type="java.util.ArrayList">
           <value>
            <object type="org.exoplatform.calendar.service.CsPropertyMapping">
             <field name="propertyName">
              <string>exo:eventcategoryName</string>
             </field>
             <field name="replaceName">
              <string></string>
             </field>
             <field name="defaultValue">
              <string></string>
             </field>
            </object>
           </value>
          </collection>
         </field>
         <field name="removedProperties">
          <collection type="java.util.ArrayList">
          </collection>
         </field>
         <field name="updatedProperties">
          <collection type="java.util.ArrayList">
          </collection>
         </field>
        </object>
       </value>	
      </collection>
     </field>
    </object>
   </object-param>
  </init-params>
 </component-plugin>
</external-component-plugins>
{code}

1.1 Mail Version Update
* Note type change
** *exo:account* add 2 properties *exo:checkAll* and *exo:checkFromDate*
** *exo:message* add property *exo:isRoot*
** configuration
{code:xml}
<external-component-plugins>
 <target-component>org.exoplatform.mail.service.MailService</target-component>
 <component-plugin>
  <name>calendar.update.version</name>
  <set-method>addListenerPlugin</set-method>
  <type>org.exoplatform.mail.service.MailUpdateStorage</type>
  <description>Update mail data</description>	
  <init-params>
   <object-param>
    <name>cs.mail.update.object</name>
    <description>cs update obj param</description>
    <object type="org.exoplatform.mail.service.CsObjectParam">
     <field name="nodeTypes">
      <collection type="java.util.ArrayList">
       <value>
	<object type="org.exoplatform.mail.service.CsNodeTypeMapping">
         <field name="nodeTypeName">
	  <string>exo:account</string>
	 </field>
	 <field name="addedProperties">
	  <collection type="java.util.ArrayList">
	   <value>
	    <object type="org.exoplatform.mail.service.CsPropertyMapping">
	     <field name="propertyName"><string>exo:checkAll</string></field>
	     <field name="replaceName"><string></string></field>
	     <field name="defaultValue"><string>true</string></field>
	    </object>
	   </value>
	   <value>
	    <object type="org.exoplatform.mail.service.CsPropertyMapping">
	     <field name="propertyName"><string>exo:checkFromDate</string></field>
	     <field name="replaceName"><string></string></field>
	     <field name="defaultValue"><string></string></field>
	    </object>
	   </value>
	  </collection>
	 </field>
        </object>
       </value>
       <value>				
        <object type="org.exoplatform.mail.service.CsNodeTypeMapping">
         <field name="nodeTypeName">
          <string>exo:message</string>
         </field>
         <field name="addedProperties">
          <collection type="java.util.ArrayList">
	   <value>
	    <object type="org.exoplatform.mail.service.CsPropertyMapping">
	     <field name="propertyName"><string>exo:isRoot</string></field>
	     <field name="replaceName"><string></string></field>
	     <field name="defaultValue"><string>true</string></field>
	    </object>
	   </value>
          </collection>
         </field>
        </object>
       </value>
      </collection>
     </field>
    </object>
   </object-param>
  </init-params>
 </component-plugin>
</external-component-plugins>
{code}
